{"ast":null,"code":"import _regeneratorRuntime from\"C:/zattekce/Projects/workplace/react/udemy/udemy-react-dersler-notlar\\u0131/udemy-react-dersleri-11_1_yemek_tarifleri_projesi/yemek-tarifleri/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _objectSpread from\"C:/zattekce/Projects/workplace/react/udemy/udemy-react-dersler-notlar\\u0131/udemy-react-dersleri-11_1_yemek_tarifleri_projesi/yemek-tarifleri/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"C:/zattekce/Projects/workplace/react/udemy/udemy-react-dersler-notlar\\u0131/udemy-react-dersleri-11_1_yemek_tarifleri_projesi/yemek-tarifleri/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/zattekce/Projects/workplace/react/udemy/udemy-react-dersler-notlar\\u0131/udemy-react-dersleri-11_1_yemek_tarifleri_projesi/yemek-tarifleri/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from\"react\";var useFetch=function useFetch(url){var method=arguments.length>1&&arguments[1]!==undefined?arguments[1]:\"GET\";var _useState=useState(null),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isLoading=_useState6[0],setIsLoading=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),options=_useState8[0],setOptions=_useState8[1];// Function to handle POST/PUT requests\nvar postData=function postData(data,method){setOptions({method:method,headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(data)});};// ✅ Move fetchData OUTSIDE useEffect so it can be returned\nvar fetchData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var fetchOptions,res,result,_args=arguments;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:fetchOptions=_args.length>0&&_args[0]!==undefined?_args[0]:{};setIsLoading(true);_context.prev=2;_context.next=5;return fetch(url,_objectSpread({method:method},fetchOptions));case 5:res=_context.sent;if(res.ok){_context.next=8;break;}throw new Error(res.statusText);case 8:_context.next=10;return res.json();case 10:result=_context.sent;console.log(\"API Response:\",result);// ✅ Debugging API response\nsetData(result);setError(null);_context.next=20;break;case 16:_context.prev=16;_context.t0=_context[\"catch\"](2);setError(_context.t0.message);console.log(_context.t0.message);case 20:_context.prev=20;setIsLoading(false);return _context.finish(20);case 23:case\"end\":return _context.stop();}},_callee,null,[[2,16,20,23]]);}));return function fetchData(){return _ref.apply(this,arguments);};}();useEffect(function(){if(method===\"GET\"){fetchData();}else if(options){console.log(\"POST/PUT Options:\",options);fetchData(options);}},[url,options,method]);return{data:data,isLoading:isLoading,error:error,postData:postData,refetch:fetchData};};export default useFetch;","map":{"version":3,"names":["useState","useEffect","useFetch","url","method","arguments","length","undefined","_useState","_useState2","_slicedToArray","data","setData","_useState3","_useState4","error","setError","_useState5","_useState6","isLoading","setIsLoading","_useState7","_useState8","options","setOptions","postData","headers","body","JSON","stringify","fetchData","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","fetchOptions","res","result","_args","wrap","_callee$","_context","prev","next","fetch","_objectSpread","sent","ok","Error","statusText","json","console","log","t0","message","finish","stop","apply","refetch"],"sources":["C:/zattekce/Projects/workplace/react/udemy/udemy-react-dersler-notları/udemy-react-dersleri-11_1_yemek_tarifleri_projesi/yemek-tarifleri/src/hooks/useFetch.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\n\nconst useFetch = (url, method = \"GET\") => {\n    const [data, setData] = useState(null);\n    const [error, setError] = useState(null);\n    const [isLoading, setIsLoading] = useState(false);\n    const [options, setOptions] = useState(null);\n\n    // Function to handle POST/PUT requests\n    const postData = (data, method) => {\n        setOptions({\n            method: method,\n            headers: {\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify(data)\n        });\n    };\n\n    // ✅ Move fetchData OUTSIDE useEffect so it can be returned\n    const fetchData = async (fetchOptions = {}) => {\n        setIsLoading(true);\n\n        try {\n            const res = await fetch(url, { method, ...fetchOptions });\n            if (!res.ok) {\n                throw new Error(res.statusText);\n            }\n            const result = await res.json();\n            console.log(\"API Response:\", result); // ✅ Debugging API response\n            setData(result);\n            setError(null);\n        } catch (err) {\n            setError(err.message);\n            console.log(err.message);\n        } finally {\n            setIsLoading(false);\n        }\n    };\n\n    useEffect(() => {\n        if (method === \"GET\") {\n            fetchData();\n        } else if (options) {\n            console.log(\"POST/PUT Options:\", options);\n            fetchData(options);\n        }\n    }, [url, options, method]);\n\n    return { data, isLoading, error, postData, refetch: fetchData };\n};\n\nexport default useFetch;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}